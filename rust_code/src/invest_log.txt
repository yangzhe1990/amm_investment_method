
running 1 test
The current directory is /Users/yangzhe/invest_strategy/rust_code
12/1/2017 23:58:00, 10869.84
lowest 3183.0, "12/15/2018 23:58:00"
begins: 30000 cash, 8.279790686891435 btc, total 120000
At price 10924.1892 sell 0.010298247122999296 coins get 112.5 cash
At price 10978.810146 sell 0.010285438357920609 coins get 112.92187499999636 cash
At price 11033.70419673 sell 0.010272645524142525 coins get 113.34533203125102 cash
At price 11088.87271771365 sell 0.010259868601848212 coins get 113.77037702636153 cash
At price 11144.317081302219 sell 0.01024710757124967 coins get 114.19701594021898 cash
At price 11200.03866670873 sell 0.010234362412578843 coins get 114.62525474999349 cash
At price 11256.038860042274 sell 0.010221633106095453 coins get 115.05509945530503 cash
At price 11312.319054342484 sell 0.010208919632083008 coins get 115.48655607826367 cash
At price 11368.880649614197 sell 0.010196221970848717 coins get 115.91963066355312 cash
At price 11425.725052862268 sell 0.010183540102725947 coins get 116.35432927854345 cash
At price 11482.85367812658 sell 0.010170874008070863 coins get 116.79065801333854 cash
At price 11540.267946517211 sell 0.010158223667264193 coins get 117.22862298088148 cash
At price 11597.969286249798 sell 0.010145589060713521 coins get 117.66823031706735 cash
At price 11655.959132681046 sell 0.010132970168847087 coins get 118.10948618075781 cash
At price 11714.238928344452 sell 0.010120366972119202 coins get 118.55239675393022 cash
At price 11772.810122986173 sell 0.010107779451009932 coins get 118.99696824176135 cash
At price 11831.674173601104 sell 0.010095207586021063 coins get 119.44320687266736 cash
At price 11890.83254446911 sell 0.010082651357680425 coins get 119.89111889844206 cash
At price 11950.286707191457 sell 0.010070110746538753 coins get 120.3407105943079 cash
At price 12010.038140727414 sell 0.010057585733172354 coins get 120.79198825903586 cash
At price 12070.088331431052 sell 0.010045076298181469 coins get 121.24495821501478 cash
At price 12130.438773088208 sell 0.010032582422188043 coins get 121.69962680831306 cash
At price 12191.090966953649 sell 0.010020104085842484 coins get 122.15600040884966 cash
At price 12252.046421788416 sell 0.010007641269814758 coins get 122.61408541037599 cash
At price 12313.306653897358 sell 0.009995193954802858 coins get 123.07388823066867 cash
At price 12374.873187166844 sell 0.009982762121525697 coins get 123.53541531153314 cash
At price 12436.747553102678 sell 0.009970345750727605 coins get 123.99867311894923 cash
At price 12498.931290868191 sell 0.009957944823177418 coins get 124.46366814315115 cash
At price 12561.425947322532 sell 0.009945559319666118 coins get 124.9304068986894 cash
At price 12624.233077059145 sell 0.009933189221008835 coins get 125.39889592454709 cash
At price 12687.35424244444 sell 0.009920834508048499 coins get 125.86914178427833 cash
At price 12750.791013656662 sell 0.009908495161645062 coins get 126.34115106596437 cash
At price 12814.544968724946 sell 0.00989617116268718 coins get 126.8149303824539 cash
At price 12878.61769356857 sell 0.009883862492087128 coins get 127.29048637139203 cash
At price 12943.010782036414 sell 0.00987156913077921 coins get 127.76782569529315 cash
At price 13007.725835946596 sell 0.009859291059720424 coins get 128.24695504164265 cash
At price 13072.764465126329 sell 0.009847028259894983 coins get 128.72788112304988 cash
At price 13138.12828745196 sell 0.009834780712308146 coins get 129.2106106772626 cash
At price 13203.81892888922 sell 0.009822548397989572 coins get 129.6951504673052 cash
At price 13269.838023533666 sell 0.009810331297991621 coins get 130.1815072815516 cash
At price 13336.187213651334 sell 0.009798129393392026 coins get 130.66968793385604 cash
At price 13402.86814971959 sell 0.009785942665291047 coins get 131.1596992636114 cash
At price 13469.882490468188 sell 0.00977377109481191 coins get 131.65154813585104 cash
At price 13537.231902920528 sell 0.009761614663101758 coins get 132.14524144135794 cash
At price 13604.91806243513 sell 0.009749473351331453 coins get 132.64078609675926 cash
At price 13672.942652747306 sell 0.00973734714069645 coins get 133.1381890446355 cash
At price 13741.307366011042 sell 0.009725236012411237 coins get 133.63745725354238 cash
At price 13810.013902841098 sell 0.009713139947719737 coins get 134.13859771825082 cash
At price 13879.063972355303 sell 0.009701058927883352 coins get 134.64161745968158 cash
At price 13948.45929221708 sell 0.009688992934192796 coins get 135.14652352516714 cash
At price 14018.201588678165 sell 0.009676941947955698 coins get 135.65332298837893 cash
At price 14088.292596621555 sell 0.009664905950508272 coins get 136.1620229495893 cash
At price 14158.734059604663 sell 0.009652884923206602 coins get 136.67263053564966 cash
At price 14229.527729902687 sell 0.009640878847431434 coins get 137.18515290015785 cash
At price 14300.675368552202 sell 0.009628887704586699 coins get 137.69959722353815 cash
At price 14372.178745394962 sell 0.009616911476098054 coins get 138.21597071312135 cash
At price 14444.039639121936 sell 0.009604950143416478 coins get 138.73428060329752 cash
At price 14516.259837317546 sell 0.0095930036880137 coins get 139.2545341555524 cash
At price 14588.841136504134 sell 0.009581072091387748 coins get 139.77673865864926 cash
At price 14661.785342186655 sell 0.009569155335054355 coins get 140.30090142860718 cash
At price 14735.094268897588 sell 0.009557253400558402 coins get 140.8270298089701 cash
At price 14808.769740242076 sell 0.009545366269463338 coins get 141.35513117075607 cash
At price 14882.813588943287 sell 0.009533493923357029 coins get 141.88521291264624 cash
At price 14957.227656888004 sell 0.009521636343850124 coins get 142.41728246106504 cash
At price 15032.013795172445 sell 0.009509793512576845 coins get 142.95134727029654 cash
At price 15107.173864148306 sell 0.009497965411192846 coins get 143.48741482255718 cash
At price 15182.709733469048 sell 0.009486152021378381 coins get 144.02549262814864 cash
At price 15258.623282136394 sell 0.009474353324833719 coins get 144.56558822549414 cash
At price 15334.916398547075 sell 0.009462569303286055 coins get 145.1077091813495 cash
At price 15411.59098053981 sell 0.00945079993848014 coins get 145.6518630907667 cash
At price 15488.648935442508 sell 0.009439045212189363 coins get 146.1980575773705 cash
At price 15566.092180119722 sell 0.009427305106203574 coins get 146.74630029327818 cash
At price 15643.922641020321 sell 0.009415579602340027 coins get 147.29659891937627 cash
At price 15722.142254225422 sell 0.009403868682437318 coins get 147.8489611653349 cash
At price 15800.75296549655 sell 0.009392172328354076 coins get 148.4033947696953 cash
At price 15879.756730324032 sell 0.00938049052197546 coins get 148.9599075000806 cash
At price 15959.155513975653 sell 0.009368823245207578 coins get 149.5185071532178 cash
At price 16038.95129154553 sell 0.009357170479976142 coins get 150.07920155502507 cash
At price 16119.146048003258 sell 0.009345532208235495 coins get 150.64199856086634 cash
At price 16199.741778243275 sell 0.009333908411956703 coins get 151.20690605547134 cash
At price 16280.740487134492 sell 0.009322299073135632 coins get 151.77393195317563 cash
At price 16362.144189570165 sell 0.009310704173790978 coins get 152.34308419800072 cash
At price 16443.954910518016 sell 0.009299123695963205 coins get 152.9143707637486 cash
At price 16526.174685070608 sell 0.009287557621714385 coins get 153.48779965411086 cash
At price 16608.805558495962 sell 0.009276005933129756 coins get 154.06337890280702 cash
At price 16691.84958628844 sell 0.009264468612317469 coins get 154.64111657369358 cash
At price 16775.308834219883 sell 0.009252945641406577 coins get 155.2210207608441 cash
At price 16859.185378390983 sell 0.00924143700254982 coins get 155.8030995887093 cash
At price 16943.481305282938 sell 0.009229942677918978 coins get 156.38736121215334 cash
At price 17028.198711809353 sell 0.00921846264971275 coins get 156.9738138167013 cash
At price 17113.3397053684 sell 0.009206996900148205 coins get 157.56246561851003 cash
At price 17198.906403895242 sell 0.009195545411467259 coins get 158.15332486459374 cash
At price 17284.900935914717 sell 0.009184108165929914 coins get 158.74639983282395 cash
At price 17371.32544059429 sell 0.009172685145823133 coins get 159.34169883219874 cash
At price 17458.18206779726 sell 0.009161276333453205 coins get 159.93923020282818 cash
At price 17545.472978136248 sell 0.00914988171114699 coins get 160.53900231607258 cash
At price 17633.20034302693 sell 0.009138501261258496 coins get 161.14102357477535 cash
At price 17721.366344742062 sell 0.009127134966156724 coins get 161.74530241316825 cash
At price 17809.973176465774 sell 0.009115782808238805 coins get 162.35184729722096 cash
At price 17899.0230423481 sell 0.009104444769919935 coins get 162.96066672458255 cash
At price 17988.51815755984 sell 0.009093120833638951 coins get 163.57176922479994 cash
At price 18078.46074834764 sell 0.009081810981856491 coins get 164.18516335940512 cash
At price 18168.853052089376 sell 0.009070515197051968 coins get 164.80085772198072 cash
At price 18259.697317349823 sell 0.009059233461732954 coins get 165.41886093845096 cash
At price 18350.99580393657 sell 0.009047965758422474 coins get 166.03918166697258 cash
At price 18442.750782956253 sell 0.009036712069667937 coins get 166.66182859821856 cash
At price 18534.964536871033 sell 0.00902547237803919 coins get 167.28681045546546 cash
At price 18627.63935955539 sell 0.009014246666126203 coins get 167.91413599467342 cash
At price 18720.777556353165 sell 0.009003034916541475 coins get 168.54381400465354 cash
At price 18814.38144413493 sell 0.008991837111919232 coins get 169.17585330717702 cash
At price 18908.453351355605 sell 0.008980653234913484 coins get 169.81026275706242 cash
At price 19002.99561811238 sell 0.008969483268204157 coins get 170.4470512424159 cash
At price 19098.010596202945 sell 0.008958327194487371 coins get 171.0862276845728 cash
At price 19193.50064918396 sell 0.00894718499648384 coins get 171.72780103838156 cash
At price 19289.46815242988 sell 0.008936056656936406 coins get 172.37178029228383 cash
At price 19385.915493192027 sell 0.008924942158606869 coins get 173.01817446837958 cash
At price 19482.845070657986 sell 0.008913841484280005 coins get 173.66699262263137 cash
At price 19580.259296011274 sell 0.008902754616762593 coins get 174.31824384497304 cash
remaining: 46659.1832691702 cash, 7.1489119572602196 btc
when price dropped back to 10869.84, total 124366.71241867563 gain 4366.712418675626
When price drop to 10869.84, stop profit total cash 93275.03431400671, hold 2.8603620756762664 in BTC because investor believes in it
Suppose holds, on 6/14/2018 23:58:00 when price dropped to 6302.31, has cash 93275.03431400671, coins worth 18026.888513155292, lost 8698.077172837995

 Try normal dollar average:
At btc lowest price 3183, total invested cash 40724.96568599329 of 134000, BTC 5.3525911039406875. The maximum potential loss if btc goes to 300: 39119.18835481108 of 134000.
Till price 13128.3 on 10/24/2020 23:58:00 dollar average invest cash 58000 in bear market, BTC amount 8.50020902132941, average price 6823.361620221542

 Try daily dollar average:
At btc lowest price 3183, total invested cash 38991.63235265993 of 132266.66666666666, BTC 4.921316017696346. The maximum potential loss if btc goes to 300: 37515.237547351026 of 132266.66666666666.
Till price 13128.3 on 10/24/2020 23:58:00 dollar average invest cash 57533.333333332674 in bear market, BTC amount 8.43345495666531, average price 6822.036001729242

 Try AMM dollar average:
At btc lowest price 3183, total invested cash 41188.8916236426 of 134463.9259376493, BTC 5.522663596497432. The maximum potential loss if btc goes to 300: 39532.09254469337 of 134463.9259376493.
Till price 13128.3 on 10/24/2020 23:58:00 dollar average invest cash 57588.6601137244 in bear market, BTC amount 8.760113947091323, average price 6573.962446327075

Use AMM dollar average

Rebalance since bull market starts at price 13128.3 on 10/24/2020 23:58:00, total asset 245832.12968370647, cash 61458.03242092662, coins 14.04401919995581, before rebalance cash 93275.03431400671, coins 11.62047602276759; total cash for invest 177588.6601137244.
begins: 61458.03242092662 cash, 14.04401919995581 btc, total 245832.12968370647
At price 33000 sell 2.114231335876984 coins get 69769.63408394047 cash
At price 33165 sell 0.014838044607063249 coins get 492.10374939325266 cash
At price 33330.825 sell 0.014819589327700803 coins get 493.9491384534631 cash
At price 33497.479125 sell 0.014801157002666914 coins get 495.8014477226825 cash
At price 33664.966520625 sell 0.01478274760340956 coins get 497.66070315163233 cash
At price 33833.29135322812 sell 0.014764361101415944 coins get 499.5269307884737 cash
At price 34002.45780999427 sell 0.014745997468204172 coins get 501.4001567788946 cash
At price 34172.470099044236 sell 0.01472765667533392 coins get 503.2804073668376 cash
At price 34343.332449539455 sell 0.014709338694394667 coins get 505.1677088944707 cash
At price 34515.04911178715 sell 0.014691043497012814 coins get 507.0620878027985 cash
At price 34687.62435734609 sell 0.014672771054852655 coins get 508.9635706320696 cash
At price 34861.06247913282 sell 0.01465452133961063 coins get 510.8721840219514 cash
At price 35035.367791528486 sell 0.014636294323018816 coins get 512.7879547120247 cash
At price 35210.544630486125 sell 0.014618089976845805 coins get 514.7109095421911 cash
At price 35386.59735363856 sell 0.01459990827289422 coins get 516.6410754529643 cash
At price 35563.53034040675 sell 0.014581749183004014 coins get 518.5784794859646 cash
At price 35741.347992108786 sell 0.014563612679044201 coins get 520.5231487840065 cash
At price 35920.05473206933 sell 0.014545498732925866 coins get 522.4751105919422 cash
At price 36099.65500572968 sell 0.014527407316591388 coins get 524.4343922566622 cash
At price 36280.15328075833 sell 0.014509338402018353 coins get 526.4010212276189 cash
At price 36461.55404716212 sell 0.014491291961220133 coins get 528.3750250572339 cash
At price 36643.861817397934 sell 0.014473267966243236 coins get 530.3564314011892 cash
At price 36827.081126484925 sell 0.014455266389170999 coins get 532.3452680189512 cash
At price 37011.21653211735 sell 0.014437287202120064 coins get 534.3415627740324 cash
At price 37196.27261477794 sell 0.014419330377241616 coins get 536.345343634428 cash
At price 37382.253977851826 sell 0.014401395886720984 coins get 538.3566386729944 cash
At price 37569.16524774108 sell 0.014383483702784175 coins get 540.3754760680895 cash
At price 37757.01107397979 sell 0.014365593797681066 coins get 542.4018841033394 cash
At price 37945.796129349685 sell 0.014347726143702794 coins get 544.4358911686868 cash
At price 38135.52510999643 sell 0.014329880713176457 coins get 546.4775257605943 cash
At price 38326.20273554641 sell 0.014312057478458408 coins get 548.52681648219 cash
At price 38517.83374922414 sell 0.014294256411942836 coins get 550.5837920439953 cash
At price 38710.42291797026 sell 0.014276477486058013 coins get 552.6484812641866 cash
At price 38903.97503256011 sell 0.0142587206732641 coins get 554.7209130689153 cash
At price 39098.49490772291 sell 0.014240985946057693 coins get 556.8011164928903 cash
At price 39293.98738226153 sell 0.014223273276971003 coins get 558.8891206797562 cash
At price 39490.457319172834 sell 0.01420558263856807 coins get 560.9849548823549 cash
At price 39687.9096057687 sell 0.014187914003444714 coins get 563.0886484631337 cash
At price 39886.34915379754 sell 0.014170267344235763 coins get 565.2002308948431 cash
At price 40085.78089956653 sell 0.014152642633609658 coins get 567.319731760741 cash
At price 40286.20980406437 sell 0.01413503984426391 coins get 569.4471807548252 cash
At price 40487.64085308469 sell 0.014117458948935051 coins get 571.5826076826488 cash
At price 40690.079057350114 sell 0.014099899920391755 coins get 573.7260424614651 cash
At price 40893.52945263687 sell 0.014082362731435998 coins get 575.8775151206937 cash
At price 41097.99709990005 sell 0.01406484735490482 coins get 578.0370558024151 cash
At price 41303.48708539955 sell 0.014047353763667074 coins get 580.2046947616618 cash
At price 41510.00452082655 sell 0.01402988193062726 coins get 582.3804623670003 cash
At price 41717.554543430684 sell 0.014012431828723585 coins get 584.5643891008804 cash
At price 41926.14231614784 sell 0.013995003430926781 coins get 586.7565055600135 cash
At price 42135.773027728574 sell 0.013977596710241643 coins get 588.9568424558674 cash
At price 42346.45189286722 sell 0.013960211639707133 coins get 591.1654306151031 cash
At price 42558.18415233155 sell 0.01394284819239302 coins get 593.3823009798652 cash
At price 42770.975073093214 sell 0.013925506341408126 coins get 595.6074846085685 cash
At price 42984.82994845868 sell 0.013908186059888692 coins get 597.841012675839 cash
At price 43199.754098200974 sell 0.013890887321008566 coins get 600.0829164733877 cash
At price 43415.752868691976 sell 0.013873610097972323 coins get 602.3332274101558 cash
At price 43632.831633035436 sell 0.013856354364019205 coins get 604.5919770129258 cash
At price 43850.995791200614 sell 0.013839120092422276 coins get 606.859196926729 cash
At price 44070.250770156614 sell 0.01382190725648622 coins get 609.1349189151952 cash
At price 44290.6020240074 sell 0.0138047158295511 coins get 611.4191748611629 cash
At price 44512.055034127436 sell 0.013787545784986144 coins get 613.711996766855 cash
At price 44734.615309298075 sell 0.013770397096199956 coins get 616.0134167547803 cash
At price 44958.288385844564 sell 0.013753269736626423 coins get 618.3234670675592 cash
At price 45183.079827773785 sell 0.013736163679739986 coins get 620.6421800690587 cash
At price 45408.99522691265 sell 0.013719078899044149 coins get 622.9695882443339 cash
At price 45636.04020304722 sell 0.013702015368075596 coins get 625.3057242002687 cash
At price 45864.22040406246 sell 0.013684973060404334 coins get 627.6506206660415 cash
At price 46093.541506082765 sell 0.013667951949631272 coins get 630.0043104934739 cash
At price 46324.00921361318 sell 0.01365095200939588 coins get 632.3668266578461 cash
Last price 46517.4 remaining: 169263.52060208615 cash, 10.961714463545066 btc, total asset 679173.9769885974, unrealized profit 501585.316874873 of 177588.6601137244; cash out precentage 0.9531212212181397
test tests::test_tsv_file_read ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out

